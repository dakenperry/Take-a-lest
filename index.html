<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼‘æ†©é€šçŸ¥ã‚¢ãƒ—ãƒª</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>ä¼‘æ†©é€šçŸ¥ã‚¢ãƒ—ãƒª</h1>
    <p>ä½•åˆ†ã”ã¨ã«é€šçŸ¥ã‚’è¡¨ç¤ºã—ã¾ã™ã‹ï¼Ÿ</p>
    <input type="number" id="intervalInput" placeholder="åˆ†" min="1">
    <button onclick="startTimer()">é€šçŸ¥ã‚’é–‹å§‹</button>

    <div id="popup">
        <img src="greentea.png" alt="ä¼‘æ†©ã‚¢ã‚¤ã‚³ãƒ³">
        <p>ä¼‘æ†©ã—ã¦ãã ã•ã„ï¼ğŸ’¡</p>
        <button onclick="closePopup()">é–‰ã˜ã‚‹</button>
    </div>

    <script>
        function startTimer() {
            let minutes = document.getElementById("intervalInput").value;
            if (minutes < 1) {
                alert("1åˆ†ä»¥ä¸Šã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
                return;
            }

            let interval = minutes * 10 * 1000;
            alert(`ä¼‘æ†©é€šçŸ¥ã‚’ ${minutes} åˆ†ã”ã¨ã«è¡¨ç¤ºã—ã¾ã™ï¼`);

            setInterval(() => {
                if (Notification.permission === "granted") {
                    new Notification("ä¼‘æ†©ã®ãŠçŸ¥ã‚‰ã›", { 
                        body: "ãã‚ãã‚ä¼‘æ†©ã—ã¾ã—ã‚‡ã†ï¼ğŸ’¡", 
                        icon: "greentea.png"
                    });
                } else if (Notification.permission !== "denied") {
                    Notification.requestPermission().then(permission => {
                        if (permission === "granted") {
                            new Notification("ä¼‘æ†©ã®ãŠçŸ¥ã‚‰ã›", { 
                                body: "ãã‚ãã‚ä¼‘æ†©ã—ã¾ã—ã‚‡ã†ï¼ğŸ’¡", 
                                icon: "greentea.png"
                            });
                        }
                    });
                }
            }, interval);
        }
    </script>
</body>
</html>
